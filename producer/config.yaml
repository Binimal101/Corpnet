# Producer Configuration — owns archrag.db and all write operations.
# All relative paths are resolved from this file's parent directory.

# ── Server settings ──────────────────────────────────────────────────
# Controls how the FastAPI server binds when started via
#   python -m producer.api
#
# base_url is the path prefix for every endpoint, e.g.
#   base_url: /api/v1  →  POST /api/v1/add, GET /api/v1/stats, …
#   base_url: /        →  POST /add, GET /stats, …
server:
  host: 0.0.0.0
  port: 8000
  base_url: /

# Where persistent data lives (relative to this config file).
# Created automatically on first run if it doesn't exist.
data_dir: data

embedding:
  adapter: openai
  model: text-embedding-3-small
  dimension: 1536

llm:
  adapter: openai
  model: gpt-4o-mini
  temperature: 0.0

graph_store:
  adapter: sqlite
  path: data/archrag.db

document_store:
  adapter: sqlite
  path: data/archrag.db

vector_index:
  adapter: numpy

clustering:
  adapter: leiden
  resolution: 1.0

indexing:
  chunk_size: 1200
  chunk_overlap: 100
  max_hierarchy_levels: 5
  similarity_threshold: 0.7

retrieval:
  k_per_layer: 5

chnsw:
  M: 32
  ef_construction: 100
